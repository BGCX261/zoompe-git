<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:System="clr-namespace:System;assembly=mscorlib"
    xmlns:local="clr-namespace:Zoom.PE">

    <System:Double x:Key="VirtualContentWidth">750</System:Double>
    
    <DataTemplate x:Key="PEFileModel">

        <Border>
            <Border.Background>
                <LinearGradientBrush
                EndPoint="0.7, 1">
                    <GradientStop Offset="0" Color="White"/>
                    <GradientStop Offset="1" Color="#FF6E7B93"/>
                </LinearGradientBrush>
            </Border.Background>

            <Border x:Name="LayoutRoot"
                Background="{StaticResource DiagonalBrush}">

                <ScrollViewer Name="scrollViewer"
                    VerticalScrollBarVisibility="Auto"
                    HorizontalScrollBarVisibility="Auto"
                    Padding="0">
                    <Grid>

                        <TextBlock Name="fileNameTextBlock"
    			            Text="{Binding FileName}"
    			            Foreground="Silver"
    			            FontSize="70"/>

                        <Slider Name="zoomSlider"
                            Value="{StaticResource PEFileWidth}" Maximum="1000"
                            Minimum="100"
                            Orientation="Vertical"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            MinWidth="20" MinHeight="200"
                            Margin="3"/>

                        <Grid
                            Margin="65, 52, 60,10" 
                            Width="{Binding Value, ElementName=zoomSlider}" MinHeight="100"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top">
                            <Border Name="outerContentBorder"
    			                BorderBrush="Black" BorderThickness="1"
    			                Background="White">
                                <Border.Effect>
                                    <DropShadowEffect Opacity="0.5"/>
                                </Border.Effect>
                            </Border>

                            <StackPanel
                                Background="White">

                                <Border
                                    Name="dosHeaderContainer"
                                    Padding="4">
                                    <Border.Background>
                                        <LinearGradientBrush EndPoint="0.1,2">
                                            <GradientStop Offset="0" Color="White"/>
                                            <GradientStop Offset="1" Color="#FFE8E8E8"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Grid>

                                        <TextBlock
                                            Margin="-40,0,0,0"
                                            Text="0000h"/>

                                        <local:ZoomLayout
                                            Content="{Binding DosHeader}"
                                            ThresholdWidth="300"
                                            ThresholdHeight="1">
                                            <local:ZoomLayout.MaxiTemplate>
                                                <DataTemplate>
                                                    <Viewbox>
                                                        <Grid Width="{StaticResource VirtualContentWidth}">
                                                            <TextBlock
                                                                Text="DOS header"
                                                                FontSize="14"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Top"/>

                                                            <ContentControl
                                                                Content="{Binding .}"
                                                                HorizontalContentAlignment="Stretch"
                                                                ContentTemplate="{StaticResource DosHeaderDetails}" />

                                                        </Grid>
                                                    </Viewbox>
                                                </DataTemplate>
                                            </local:ZoomLayout.MaxiTemplate>

                                            <local:ZoomLayout.MiniTemplate>
                                                <DataTemplate>
                                                    <Viewbox>
                                                        <Grid>
                                                            <TextBlock
                                                                Text="DOS header"
                                                                FontSize="14"
                                                                Margin="100,0,0,0"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Top"/>
                                                        </Grid>
                                                    </Viewbox>
                                                </DataTemplate>
                                            </local:ZoomLayout.MiniTemplate>
                                        </local:ZoomLayout>

                                    </Grid>
                                </Border>

                                <Border Name="dosStubContainer"
                                    Visibility="{Binding IsDosStubVisible, Converter={StaticResource BooleanToVisibilityConverter}}"
                                    Padding="4">
                                    <Border.Background>
                                        <LinearGradientBrush EndPoint="0.001,1">
                                            <GradientStop Offset="0" Color="White"/>
                                            <GradientStop Offset="1" Color="#FFFBC9C9"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Grid>
                                        <Canvas>
                                            <TextBlock
                                                Margin="-40,0,0,0"
                                                Text="0040h"/>
                                        </Canvas>

                                        <local:ZoomLayout Content="{Binding DosStub}"
                                            ThresholdWidth="300"                                        
                                            ThresholdHeight="1">
                                            <local:ZoomLayout.MaxiTemplate>
                                                <DataTemplate>
                                                    <Viewbox>
                                                        <Grid Width="{StaticResource VirtualContentWidth}">
                                                            <TextBlock
                                                                Text="DOS stub"
                                                                FontSize="14"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Top"/>

                                                            <local:BinaryEditor Data="{Binding Data}"
                                                                FontFamily="Courier New"
                                                                Foreground="Silver"/>

                                                        </Grid>
                                                    </Viewbox>
                                                </DataTemplate>
                                            </local:ZoomLayout.MaxiTemplate>

                                            <local:ZoomLayout.MiniTemplate>
                                                <DataTemplate>
                                                    <Viewbox>
                                                        <Grid>
                                                            <TextBlock
                                                                Text="DOS stub"
                                                                FontSize="14"
                                                                Margin="100,0,0,0"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Top"/>

                                                        </Grid>
                                                    </Viewbox>
                                                </DataTemplate>
                                            </local:ZoomLayout.MiniTemplate>
                                        </local:ZoomLayout>



                                    </Grid>
                                </Border>

                                <Border
                                    Name="peHeaderContainer"
                                    Padding="4">
                                    <Border.Background>
                                        <LinearGradientBrush EndPoint="0.1,2">
                                            <GradientStop Offset="0" Color="White"/>
                                            <GradientStop Offset="1" Color="#FFE8E8E8"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Grid>

                                        <TextBlock
                                            Margin="-40,0,0,0"
                                            Text="{Binding PEHeader.Address, Converter={StaticResource HexConverter}, ConverterParameter=X4}"/>

                                        <local:ZoomLayout
                                            Content="{Binding PEHeader}"
                                            ThresholdWidth="300"
                                            ThresholdHeight="1">
                                            <local:ZoomLayout.MaxiTemplate>
                                                <DataTemplate>
                                                    <Viewbox>
                                                        <Grid Width="{StaticResource VirtualContentWidth}">
                                                            <TextBlock
                                                                Text="PE header"
                                                                FontSize="14"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Top"/>

                                                            <ContentControl
                                                                Content="{Binding .}"
                                                                HorizontalContentAlignment="Stretch"
                                                                ContentTemplate="{StaticResource PEHeaderDetails}" />

                                                        </Grid>
                                                    </Viewbox>
                                                </DataTemplate>
                                            </local:ZoomLayout.MaxiTemplate>

                                            <local:ZoomLayout.MiniTemplate>
                                                <DataTemplate>
                                                    <Viewbox>
                                                        <Grid>
                                                            <TextBlock
                                                                Text="PE header"
                                                                FontSize="14"
                                                                Margin="100,0,0,0"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Top"/>
                                                        </Grid>
                                                    </Viewbox>
                                                </DataTemplate>
                                            </local:ZoomLayout.MiniTemplate>
                                        </local:ZoomLayout>

                                    </Grid>
                                </Border>

                                <Border
                                    Name="optionalHeaderContainer"
                                    Padding="4">
                                    <Border.Background>
                                        <LinearGradientBrush EndPoint="0.1,2">
                                            <GradientStop Offset="0" Color="White"/>
                                            <GradientStop Offset="1" Color="#FFE8E8E8"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Grid>

                                        <TextBlock
                                            Margin="-40,0,0,0"
                                            Text="{Binding OptionalHeader.Address, Converter={StaticResource HexConverter}, ConverterParameter=X4}"/>

                                        <local:ZoomLayout
                                            Content="{Binding OptionalHeader}"
                                            ThresholdWidth="300"
                                            ThresholdHeight="1">
                                            <local:ZoomLayout.MaxiTemplate>
                                                <DataTemplate>
                                                    <Viewbox>
                                                        <Grid Width="{StaticResource VirtualContentWidth}">
                                                            <TextBlock
                                                                Text="Optional header"
                                                                FontSize="14"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Top"/>

                                                            <ContentControl
                                                                Content="{Binding .}"
                                                                HorizontalContentAlignment="Stretch"
                                                                ContentTemplate="{StaticResource OptionalHeaderDetails}" />

                                                        </Grid>
                                                    </Viewbox>
                                                </DataTemplate>
                                            </local:ZoomLayout.MaxiTemplate>

                                            <local:ZoomLayout.MiniTemplate>
                                                <DataTemplate>
                                                    <Viewbox>
                                                        <Grid>
                                                            <TextBlock
                                                                Text="Optional header"
                                                                FontSize="14"
                                                                Margin="100,0,0,0"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Top"/>
                                                        </Grid>
                                                    </Viewbox>
                                                </DataTemplate>
                                            </local:ZoomLayout.MiniTemplate>
                                        </local:ZoomLayout>

                                    </Grid>
                                </Border>

                            </StackPanel>
                        </Grid>
                    </Grid>
                </ScrollViewer>
            </Border>
        </Border>

    </DataTemplate>
    
</ResourceDictionary>
